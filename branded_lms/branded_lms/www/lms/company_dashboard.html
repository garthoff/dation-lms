<h2>Company Dashboard</h2>
<p>Track the learning progress of all your employees.</p>

<input type="text" id="company-id" placeholder="Enter your Company ID" />
<button onclick="loadCompanyProgress()">Load Progress</button>

<div id="team-progress"></div>

<script>
function loadCompanyProgress() {
  const companyId = document.getElementById('company-id').value;
  fetch('/api/method/branded_lms.api.lms_api.get_company_progress?company=' + companyId)
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('team-progress');
      if (!data.message || data.message.length === 0) {
        container.innerHTML = "<p>No progress found for this company.</p>";
        return;
      }

      const rows = data.message.map(row => `
        <tr>
          <td>\${row.student}</td>
          <td>\${row.course}</td>
          <td>\${row.is_completed ? "✅" : "⏳"}</td>
          <td>\${row.completion_date || "-"}</td>
        </tr>
      \`).join("");

      container.innerHTML = \`
        <h3>Employee Course Progress</h3>
        <table border="1" cellpadding="5">
          <tr><th>Student</th><th>Course</th><th>Status</th><th>Completed On</th></tr>
          \${rows}
        </table>
      `;
    });
}
</script>
